(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{506:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(412),i=a(102),l=a.n(i),s=a(8),o=a(19),c=new(a(484).AllHtmlEntities),u=a(13),d=a(12);function h(e){const t=e.state.form;if("image"!==t.$("imageType").value||!t.$("shareAgreed").value)return;const a=t.$("shareRejectReasons").value;if(!a)return;const r=e.key,n=t.state.initial.props.values;return a[r]&&n[r].toString()===e.value.toString()?[!1,a[r]]:void 0}function g(){const e={fields:["currentAuthorUid","id","uid","name","imageType","url","showText","fontSize","bgColor","src","shareAgreed","type","type[]","description","isCustom","shareId","authorUid","shareRejectReasons","updateTime"],handlers:{type:{onChange:e=>Object(r.action)("updateType",t=>{Object.keys(e.get()).forEach(t=>{e.del(t)});var a=!0,r=!1,n=void 0;try{for(var i,l=t[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){const t=i.value;e.add({value:t})}}catch(e){r=!0,n=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw n}}e.validate({showErrors:!0})})}},types:{shareAgreed:"checkbox"},labels:{shareAgreed:Object(s.a)("share_to_others")},validators:{url({field:e,form:t}){const a=h(e);if(a)return a;const r=e.value;return 0===r.length?[!1,Object(s.a)("required")]:"image"!==t.$("imageType").value||!t.$("shareAgreed").value||[Object(d.m)(r),Object(s.a)("please_input_correct_url")]},name({field:e,form:t}){const a=h(e);return a||("image"!==t.$("imageType").value||!t.$("shareAgreed").value||[e.value.length>0,Object(s.a)("required")])},src({field:e,form:t}){const a=h(e);return a||("image"!==t.$("imageType").value||[e.value.length>0,Object(s.a)("required")])},type({field:e,form:t}){const a=h(e);return a||("image"!==t.$("imageType").value||!t.$("shareAgreed").value||[e.value.length>0,Object(s.a)("required")])},description({field:e,form:t}){const a=h(e);return a||("image"!==t.$("imageType").value||!t.$("shareAgreed").value||[e.value.length>0,Object(s.a)("required")])}},placeholders:{name:Object(s.a)("site_name"),url:"http://",showText:Object(s.a)("display_text"),type:Object(s.a)("click_add_tag"),description:Object(s.a)("site_desc")},options:{url:{validateOnChange:!0},name:{validateOnChange:!0},src:{validateOnChange:!0},description:{validateOnChange:!0}},observers:{shareAgreed:[{key:"value",call:({form:e})=>{e.$("url").validate({showErrors:!0}),e.$("name").validate({showErrors:!0})}}],name:[{key:"value",call:({form:e,change:t})=>{const a=t.newValue;e.$("showText").touched||e.set({showText:a.slice(0,2)})}}],url:[{key:"value",call:l()(({form:e,change:t})=>{let a=t.newValue.trim();a&&(a=Object(u.c)(a),Object(o.a)(a,{responseType:"text"}).then(t=>{const a=/<title>(.*)<\/\s*title>/.exec(t);if(a){const t=c.decode(a[1]);if("Redirect"===t)return;e.set({name:t,showText:t})}}))},600)}]}};return new n.Form(e)}a.d(t,"default",function(){return g})}}]);